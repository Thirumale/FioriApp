<mvc:View
    controllerName="BasicFiori-Routing.controller.CustomerOrder"
	xmlns:l="sap.ui.layout"
	xmlns:mvc="sap.ui.core.mvc"
    xmlns:viz="sap.viz.ui5.controls" 
	xmlns="sap.m">
    <Page
		title="Customer Order Details Page"
		showNavButton="true"
          navButtonPress="onNavBack">
        <l:VerticalLayout
		class="sapUiContentPadding">
            <l:content>
                <IconTabBar
                    id="idIconTabBar"
                    select="handleIconTabBarSelect"
                    class="sapUiResponsiveContentPadding">
                    <items>
                        <IconTabFilter
                            showAll="true"
                            count="{OrderDetails>/orderCount}"
                            text="Order Details" 
                            key="All"/>
                        <IconTabSeparator />
                        <IconTabFilter
                            icon="sap-icon://bar-chart"
                            iconColor="Positive"
                            text="Product Chart"
                            key="Chart" 
                            visible="{= ${OrderDetails>/orderCount} >= 2 ? true : false}"/>
                    </items>
	           </IconTabBar>
                <Table id="OrderDetailsItem" visible="{= ${OrderDetails>/stepStatus} === 'All' ? true : false}"
                    inset="false"
                     items= "{OrderDetails>/OrderDetails}" >
                    <headerToolbar>
                        <Toolbar>
                            <Title text="Customer Orders" level="H2"/>
                        </Toolbar>
                    </headerToolbar>
                    <columns>
                        <Column>
                             <Text text="Discount" />
                        </Column>
                        <Column>
                            <Text text="OrderId" />
                        </Column>
                        <Column>
                            <Text text="ProductId" />
                        </Column>
                        <Column>
                            <Text text="Quantity" />
                        </Column>
                        <Column>
                             <Text text="UnitPrice" />
                        </Column>
                        <Column>
                             <Text text="TotalPrice" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>

                                <Text
                                    text="{OrderDetails>Discount}" />
                                <Text
                                    text="{OrderDetails>OrderId}" />
                                <Text
                                    text="{OrderDetails>ProductId}" />
                                <Text
                                    text="{OrderDetails>Quantity}" />
                                 <Text
                                    text="{OrderDetails>UnitPrice}" />
                                <Text
                                    text="{
                                        parts: [
                                        {path: 'OrderDetails>UnitPrice'},
                                        {path: 'OrderDetails>Discount'},
                                        {path: 'OrderDetails>Quantity'} ],
                                        formatter : '.formatter.totalPriceCalculation'
                                        }" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
                <viz:VizFrame xmlns="sap.viz" id="idcolumn" width="100%" 
                              visible="{= ${OrderDetails>/stepStatus} === 'Chart' ? true : false}"></viz:VizFrame>
            </l:content>
        </l:VerticalLayout>
    </Page>  
</mvc:View>

